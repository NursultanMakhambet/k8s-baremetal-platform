---
# Install kubectl on the control host (localhost). Uses package manager.

- name: Install kubectl (Debian/Ubuntu)
  package:
    name: kubectl
    state: present
  when: ansible_os_family == "Debian"
  become: true
  tags: [kubectl_config]

- name: Install kubectl (RHEL/Rocky)
  package:
    name: kubectl
    state: present
  when: ansible_os_family == "RedHat"
  become: true
  tags: [kubectl_config]

- name: Ensure .kube directory exists on control host
  file:
    path: "{{ kubectl_config_dest | dirname }}"
    state: directory
    mode: "0755"
  tags: [kubectl_config]
